# Brainstorm Report: Mock Data Structure

**Issue:** [#4 - Tạo mock data structure](https://github.com/synkao/synkao/issues/4)
**Date:** 2024-12-24
**Status:** Approved

---

## Problem Statement

Issue #4 yêu cầu tạo JSON files cho mock data, bao gồm:
- Mock users (Staff, Designer, Admin)
- Mock workspaces + columns (5 columns mặc định)
- Mock design tasks (các trạng thái khác nhau)
- Mock orders + items

---

## Current State

**Đã có:**
- Types: `MockUser`, `MockTask`, `MockOrder`, `MockKanbanColumn` trong `mocks/types.ts`
- Handlers: auth, tasks, orders với inline data (3-4 items mỗi loại)

**Thiếu:**
- OrderItem entity (1 Order → nhiều Items)
- Workspace entity
- DesignVersion entity
- Đủ volume để test pagination/filtering

---

## Evaluated Approaches

### Option A: JSON Files (Issue Original)
**Pros:** Simple, static, version control friendly
**Cons:** No type checking, cần parse, không dynamic

### Option B: TypeScript Files with Factories ✅ Selected
**Pros:** Type-safe, IDE support, factory functions, dynamic generation
**Cons:** Slightly more setup

### Option C: Faker.js Dynamic Generation
**Pros:** Random realistic data, infinite volume
**Cons:** Over-engineered for MVP, inconsistent test data

---

## Final Solution

### Data Model

```
User (6 users: 1 Admin, 2 Staff, 3 Designer)
  └── Designer được assign Tasks

Workspace (2: Main + Archive)
  └── Columns (5 cột mặc định)

Order (15 orders)
  └── OrderItems (45 items, ~3/order)
       └── Task (1:1 mapping)
            └── DesignVersions (chỉ REVIEW/DONE tasks)
```

### File Structure

```
apps/web/src/mocks/
├── data/
│   ├── users.data.ts          # 6 users
│   ├── workspaces.data.ts     # 2 workspaces
│   ├── orders.data.ts         # 15 orders
│   ├── order-items.data.ts    # 45 items
│   └── tasks.data.ts          # 45 tasks
├── factories/
│   └── mock-factory.ts        # Helper functions
├── types.ts                   # Updated types
└── handlers/
    └── (update existing)
```

### Type Additions

```typescript
interface MockOrderItem {
  id: string;
  orderId: string;
  productType: 'T_SHIRT' | 'MUG' | 'CANVAS' | 'HOODIE' | 'POSTER';
  productName: string;
  designNotes?: string;
  quantity: number;
}

interface MockWorkspace {
  id: string;
  name: string;
  ownerId: string;
  memberIds: string[];
}

interface MockDesignVersion {
  id: string;
  taskId: string;
  version: number;
  fileUrl: string;
  status: 'DRAFT' | 'SUBMITTED' | 'APPROVED' | 'REJECTED';
  rejectionReason?: string;
  createdAt: string;
}
```

### Data Distribution

| Entity | Count | Distribution |
|--------|-------|--------------|
| Users | 6 | 1 Admin, 2 Staff, 3 Designer |
| Workspaces | 2 | Main (active), Archive |
| Orders | 15 | Mix statuses |
| OrderItems | 45 | ~3 items per order |
| Tasks | 45 | TODO:15, IN_PROGRESS:10, REVIEW:8, REVISION:5, DONE:7 |
| DesignVersions | 20 | Chỉ cho tasks có design |

### ID Format Convention
- Users: `USR-001`, `USR-002`
- Orders: `ORD-001`, `ORD-002`
- OrderItems: `ITM-001`, `ITM-002`
- Tasks: `TSK-001`, `TSK-002`
- Workspaces: `WKS-001`, `WKS-002`

---

## Implementation Considerations

### Pros
- TypeScript = type-safe, IDE autocomplete
- Factory pattern = DRY, easy to generate more data
- Separate entities = đúng business logic, flexible

### Cons
- Thêm complexity với OrderItem relations
- Cần update existing handlers

### Risks
- Data relationships có thể không consistent → **Mitigate:** Factory functions đảm bảo referential integrity

---

## Success Metrics

- [ ] 6 mock users với 3 roles
- [ ] 2 workspaces với 5 columns mỗi cái
- [ ] 15 orders với 45 items
- [ ] 45 tasks distributed qua 5 columns
- [ ] TypeScript types cho tất cả entities
- [ ] MSW handlers hoạt động với data mới

---

## Next Steps

1. Update `mocks/types.ts` với MockOrderItem, MockWorkspace, MockDesignVersion
2. Tạo `mocks/data/` folder structure
3. Tạo `mocks/factories/mock-factory.ts`
4. Populate data files với realistic Vietnamese data
5. Update handlers để dùng imported data
6. Test với browser để verify

---

## Decisions Made

| Decision | Choice | Rationale |
|----------|--------|-----------|
| Data format | TypeScript | Type-safe, IDE support |
| Data volume | Medium (30-50) | Đủ test pagination/filtering |
| OrderItem entity | Có | Đúng business logic |

---

*Report generated by brainstormer agent*
